<!DOCTYPE html>
<html>
<head>
    <title>Socket.IO Test</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
    <h1>Socket.IO Connection Test</h1>
    <div id="status">Connecting...</div>
    <div id="messages"></div>

    <script>
        // Get your JWT token from Insomnia and paste it here
        const token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2OGYxMDFlNTNlODkyNmZmNTIzMDZhYzYiLCJpYXQiOjE3NjEyMzMxNzAsImV4cCI6MTc2MTY2NTE3MH0.B97Zg7zFW4j8ifUjx8rMMwkV-HCeVfX1osWnoT34uKM'; // Replace with your actual token
        
        const socket = io('http://localhost:5000', {
            auth: {
                token: token
            }
        });

        socket.on('connect', () => {
            document.getElementById('status').innerHTML = 'Connected!';
            console.log('Connected to server');
        });

        socket.on('disconnect', () => {
            document.getElementById('status').innerHTML = 'Disconnected';
            console.log('Disconnected from server');
        });

        // Test joining a session room
        function joinSession(sessionId) {
            socket.emit('join-session', sessionId);
            addMessage(`Joined session: ${sessionId}`);
        }

        function addMessage(message) {
            const messagesDiv = document.getElementById('messages');
            messagesDiv.innerHTML += `<p>${message}</p>`;
        }

        // Add test buttons
        document.body.innerHTML += `
            <br>
            <input type="text" id="sessionIdInput" placeholder="Enter session ID">
            <button onclick="joinSession(document.getElementById('sessionIdInput').value)">Join Session</button>
        `;
    </script>
</body>
</html>